CREATE TABLE tbl_conversations (
	id_conversation int(5) NOT NULL auto_increment,
	uniq_hash varchar(255) NOT null,
	title varchar(255) NOT NULL,
	id_creator int(5) NOT null,
	token_creator varchar(255) NOT NULL,
	id_receiver int(5) NOT null,
	token_receiver varchar(255) NOT NULL,
	id_last_message int(5),
	id_first_message int(5),
	id_status int(5) NOT NULL,
	created_at TIMESTAMP,
	updated_at TIMESTAMP,
	PRIMARY key(id_conversation)
);

CREATE TABLE tbl_messages (
	id_message int(5) NOT NULL auto_increment,
	id_user int(5) NOT NULL,
	id_conversation int(5) NOT NULL,
	message varchar(255),
	id_status int(5) NOT NULL,
	created_at DATETIME,
	updated_at DATETIME,
	PRIMARY key(id_message)
);

CREATE TABLE lbl_status_messenger (
	id_status int(5) NOT NULL auto_increment,
	lockey varchar(255) NOT NULL,
	label varchar(255) NOT NULL,
	created_at DATETIME,
	updated_at DATETIME,
	PRIMARY key(id_status)
);

INSERT INTO lbl_status_messenger(lockey, label, created_at, updated_at) VALUES('pending', 'En attente', NOW(), NOW());
INSERT INTO lbl_status_messenger(lockey, label, created_at, updated_at) VALUES('read', 'Lu', NOW(), NOW());


CREATE TABLE users (
	userID int(11) not null auto_increment,
	avatars longtext,
	fname varchar(255),
	lname varchar(255),
	primary key(userID)
);

INSERT INTO users(avatars, fname, lname) VALUES('https://ssl.gstatic.com/images/branding/product/1x/avatar_circle_blue_512dp.png', 'Alexis', 'Courapied');
INSERT INTO users(avatars, fname, lname) VALUES('https://ssl.gstatic.com/images/branding/product/1x/avatar_circle_blue_512dp.png', 'Valentin', 'Lafontaine');


CREATE TABLE access_token (
	id int(5) not null auto_increment,
	user_id int(5) not null,
	token varchar(255),
	refresh_token varchar(255),
	flag_delete int(1),
	created_at DATETIME,
	updated_at DATETIME,
	primary key(id)
);

INSERT INTO access_token(user_id, token, refresh_token, flag_delete, created_at, updated_at) VALUES(1, 'token1', 'token1', 0, NOW(), NOW());
INSERT INTO access_token(user_id, token, refresh_token, flag_delete, created_at, updated_at) VALUES(1, 'token2', 'token2', 0, NOW(), NOW());
